    var json = [{"cnName":"关系","id":"order_class_Relation?RELRELATION?RelRelation?3.0","lastUpdateTime":"2012-12-19","version":"3.0","desc":"关系","appName":"Inventory","engName":"RELRELATION","classTitle":"RelRelation","fileName":"order_class_Relation"},{"cnName":"配套设备","id":"order_class_ResObject?RESSUPPORTINGFACILITIES?ResSupportingfacilities?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"配套设备","appName":"Inventory","engName":"RESSUPPORTINGFACILITIES","classTitle":"ResSupportingfacilities","fileName":"order_class_ResObject"},{"cnName":"业务功能","id":"order_class_ResObject?RESBIZMODULE?ResBizModule?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"业务功能","appName":"Inventory","engName":"RESBIZMODULE","classTitle":"ResBizModule","fileName":"order_class_ResObject"},{"cnName":"维度根类","id":"order_class_ResObject?RESSUPERDIM?ResSuperDim?1.0","lastUpdateTime":"2009-05-13","version":"1.0","desc":"维度根类","appName":"Inventory","engName":"RESSUPERDIM","classTitle":"ResSuperDim","fileName":"order_class_ResObject"},{"cnName":"软件版本","id":"order_class_ResObject?RESSOFTVERSION?ResSoftVersion?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"软件版本","appName":"Inventory","engName":"RESSOFTVERSION","classTitle":"ResSoftVersion","fileName":"order_class_ResObject"},{"cnName":"型号","id":"order_class_ResObject?RESHOSTRESDIMMODELS?ResDimModels?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"分类型号","appName":"Inventory","engName":"RESHOSTRESDIMMODELS","classTitle":"ResDimModels","fileName":"order_class_ResObject"},{"cnName":"资源类型","id":"order_class_ResObject?RESCATEGORYTREE?ResCategory?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"资源类型","appName":"Inventory","engName":"RESCATEGORYTREE","classTitle":"ResCategory","fileName":"order_class_ResObject"},{"cnName":"状态代码","id":"order_class_ResObject?RESDIMPHASE?ResDimPhase?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"状态代码","appName":"Inventory","engName":"RESDIMPHASE","classTitle":"ResDimPhase","fileName":"order_class_ResObject"},{"cnName":"厂商","id":"order_class_ResObject?RESDIMVENDORS?ResDimVendors?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"厂商","appName":"Inventory","engName":"RESDIMVENDORS","classTitle":"ResDimVendors","fileName":"order_class_ResObject"},{"cnName":"地域","id":"order_class_ResObject?RESDIMAREA?ResDimArea?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"地域","appName":"Inventory","engName":"RESDIMAREA","classTitle":"ResDimArea","fileName":"order_class_ResObject"},{"cnName":"资源类型","id":"order_class_ResObject?RESCATEGORY?ResCategory?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"资源类型","appName":"Inventory","engName":"RESCATEGORY","classTitle":"ResCategory","fileName":"order_class_ResObject"},{"cnName":"组织","id":"order_class_ResObject?RESDIMORGANIZE?ResDimOrganize?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"组织","appName":"Inventory","engName":"RESDIMORGANIZE","classTitle":"ResDimOrganize","fileName":"order_class_ResObject"},{"cnName":"应用类型","id":"order_class_ResObject?RESVMTYPE?ResVMType?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"应用类型","appName":"Inventory","engName":"RESVMTYPE","classTitle":"ResVMType","fileName":"order_class_ResObject"},{"cnName":"组织","id":"order_class_ResObject?RESDIMORGANIZE?ResDimOrganize?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"组织","appName":"Inventory","engName":"RESDIMORGANIZE","classTitle":"ResDimOrganize","fileName":"order_class_ResObject"},{"cnName":"房间","id":"order_class_ResObject?RESDIMROOM?ResDimRoom?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"房间","appName":"Inventory","engName":"RESDIMROOM","classTitle":"ResDimRoom","fileName":"order_class_ResObject"},{"cnName":"型号","id":"order_class_ResObject?RESDIMMODELS?ResDimModels?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"型号","appName":"Inventory","engName":"RESDIMMODELS","classTitle":"ResDimModels","fileName":"order_class_ResObject"},{"cnName":"地点","id":"order_class_ResObject?RESDIMPLACE?ResDimPlace?2.0","lastUpdateTime":"2014-11-27","version":"2.0","desc":"地点","appName":"Inventory","engName":"RESDIMPLACE","classTitle":"ResDimPlace","fileName":"order_class_ResObject"},{"cnName":"操作系统","id":"order_class_ResObject?RESOS?ResOS?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"操作系统","appName":"Inventory","engName":"RESOS","classTitle":"ResOS","fileName":"order_class_ResObject"},{"cnName":"配置项","id":"order_class_ResObject?RESOBJECT?ResObject?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"配置项","appName":"Inventory","engName":"RESOBJECT","classTitle":"ResObject","fileName":"order_class_ResObject"},{"cnName":"业务系统","id":"order_class_ResObject?RESBUSINESS?ResBusiness?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"业务系统","appName":"Inventory","engName":"RESBUSINESS","classTitle":"ResBusiness","fileName":"order_class_ResObject"},{"cnName":"软件系统","id":"order_class_ResObject?RESSOFTWARE?ResSoftware?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"软件系统","appName":"Inventory","engName":"RESSOFTWARE","classTitle":"ResSoftware","fileName":"order_class_ResObject"},{"cnName":"应用系统","id":"order_class_ResObject?RESAPPSOFTWARE?ResAppSoftWare?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"应用系统","appName":"Inventory","engName":"RESAPPSOFTWARE","classTitle":"ResAppSoftWare","fileName":"order_class_ResObject"},{"cnName":"测试子级三额外外外","id":"order_class_test?RESTEST2?Restest2?10.0","lastUpdateTime":"2016-01-26","version":"10.0","desc":"测试子级三额外外外","appName":"Inventory","engName":"RESTEST2","classTitle":"Restest2","fileName":"order_class_test"},{"cnName":"测试关系","id":"order_class_test?RELTESTREALTION?RelTestRealtion?10.0","lastUpdateTime":"2016-01-26","version":"10.0","desc":"测试关系","appName":"Inventory","engName":"RELTESTREALTION","classTitle":"RelTestRealtion","fileName":"order_class_test"},{"cnName":"测试类","id":"order_class_test?RESTESTCLASS?ResTestClass?10.0","lastUpdateTime":"2016-01-27","version":"10.0","desc":"测试类","appName":"Inventory","engName":"RESTESTCLASS","classTitle":"ResTestClass","fileName":"order_class_test"},{"cnName":"测试12","id":"order_class_test?RESTEST12?ResTest12?10.0","lastUpdateTime":"2016-01-27","version":"10.0","desc":"测试12","appName":"Inventory","engName":"RESTEST12","classTitle":"ResTest12","fileName":"order_class_test"},{"cnName":"实物查询","id":"order_class_Asset?RESASSET?ResAsset?1.0","lastUpdateTime":"2009-05-08","version":"1.0","desc":"实物查询","appName":"Inventory","engName":"RESASSET","classTitle":"ResAsset","fileName":"order_class_Asset"},{"cnName":"租赁资产查询","id":"order_class_Asset?RESLEASINGASSET?ResLeasingAsset?1.0","lastUpdateTime":"2009-05-08","version":"1.0","desc":"实物查询","appName":"Inventory","engName":"RESLEASINGASSET","classTitle":"ResLeasingAsset","fileName":"order_class_Asset"},{"cnName":"固定资产查询","id":"order_class_Asset?RESFIXEDASSET?ResFixedAsset?1.0","lastUpdateTime":"2009-05-08","version":"1.0","desc":"实物查询","appName":"Inventory","engName":"RESFIXEDASSET","classTitle":"ResFixedAsset","fileName":"order_class_Asset"},{"cnName":"库房管理表查询","id":"order_class_Asset?RESSTOREHOUSE?ResStorehouse?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"库房管理表查询","appName":"Inventory","engName":"RESSTOREHOUSE","classTitle":"ResStorehouse","fileName":"order_class_Asset"},{"cnName":"硬件维护记录表","id":"order_class_Asset?RESMAINTAIN?ResMaintain?4.0","lastUpdateTime":"2013-01-05","version":"4.0","desc":"硬件维护记录表","appName":"Inventory","engName":"RESMAINTAIN","classTitle":"ResMaintain","fileName":"order_class_Asset"},{"cnName":"硬件维护记录表","id":"order_class_Asset?RESSNMPKPI_LIST?ResSnmpKPI?1.0","lastUpdateTime":"2013-01-05","version":"1.0","desc":"SNMP采集指标列表","appName":"Inventory","engName":"RESSNMPKPI_LIST","classTitle":"ResSnmpKPI","fileName":"order_class_Asset"},{"cnName":"采集任务","id":"order_class_Asset?RESCOLLECTTASK?ResCollectTask?1.0","lastUpdateTime":"2015-06-19","version":"1.0","desc":"采集任务","appName":"Inventory","engName":"RESCOLLECTTASK","classTitle":"ResCollectTask","fileName":"order_class_Asset"},{"cnName":"采集任务","id":"order_class_Asset?RESSNMPCONF?ResSnmpConf?1.0","lastUpdateTime":"2015-06-19","version":"1.0","desc":"采集目标","appName":"Inventory","engName":"RESSNMPCONF","classTitle":"ResSnmpConf","fileName":"order_class_Asset"},{"cnName":"SNMP指标","id":"order_class_Asset?RESSNMPKPI?ResSnmpKPI?1.0","lastUpdateTime":"2015-06-19","version":"1.0","desc":"SNMP指标","appName":"Inventory","engName":"RESSNMPKPI","classTitle":"ResSnmpKPI","fileName":"order_class_Asset"},{"cnName":"脚本指标","id":"order_class_Asset?RESSHELLKPI?ResShellKPI?1.0","lastUpdateTime":"2015-06-19","version":"1.0","desc":"脚本指标","appName":"Inventory","engName":"RESSHELLKPI","classTitle":"ResShellKPI","fileName":"order_class_Asset"},{"cnName":"采集账号","id":"order_class_Asset?RESNODEACCOUNT?ResNodeAccount?2.0","lastUpdateTime":"2015-06-19","version":"2.0","desc":"采集账号","appName":"Inventory","engName":"RESNODEACCOUNT","classTitle":"ResNodeAccount","fileName":"order_class_Asset"},{"cnName":"管理部件","id":"order_class_ResManUnit?RESMANUNIT?ResManUnit?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"管理部件","appName":"Inventory","engName":"RESMANUNIT","classTitle":"ResManUnit","fileName":"order_class_ResManUnit"},{"cnName":"人员","id":"order_class_ResManUnit?RESPERSONNEL?ResPersonnel?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"人员","appName":"Inventory","engName":"RESPERSONNEL","classTitle":"ResPersonnel","fileName":"order_class_ResManUnit"},{"cnName":"IP地址","id":"order_class_ResManUnit?RESIPADDRESS?ResIpAddress?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"IP地址","appName":"Inventory","engName":"RESIPADDRESS","classTitle":"ResIpAddress","fileName":"order_class_ResManUnit"},{"cnName":"库表","id":"order_class_ResManUnit?RESDBTABLE?ResDBTable?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"库表","appName":"Inventory","engName":"RESDBTABLE","classTitle":"ResDBTable","fileName":"order_class_ResManUnit"},{"cnName":"物理部件","id":"order_class_ResManUnit?RESPHYPART?ResPhyPart?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"物理部件","appName":"Inventory","engName":"RESPHYPART","classTitle":"ResPhyPart","fileName":"order_class_ResManUnit"},{"cnName":"链路","id":"order_class_ResManUnit?RESLINK?ResLink?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"链路","appName":"Inventory","engName":"RESLINK","classTitle":"ResLink","fileName":"order_class_ResManUnit"},{"cnName":"VG查询","id":"order_class_ResManUnit?RESVG?ResVG?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"VG查询","appName":"Inventory","engName":"RESVG","classTitle":"ResVG","fileName":"order_class_ResManUnit"},{"cnName":"板卡","id":"order_class_ResManUnit?RESCARD?ResCard?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"板卡","appName":"Inventory","engName":"RESCARD","classTitle":"ResCard","fileName":"order_class_ResManUnit"},{"cnName":"CPU","id":"order_class_ResManUnit?RESCPU?ResCPU?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"ResCPU","appName":"Inventory","engName":"RESCPU","classTitle":"ResCPU","fileName":"order_class_ResManUnit"},{"cnName":"内存","id":"order_class_ResManUnit?RESMEMORY?ResMemory?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"ResMemory","appName":"Inventory","engName":"RESMEMORY","classTitle":"ResMemory","fileName":"order_class_ResManUnit"},{"cnName":"磁盘","id":"order_class_ResManUnit?RESDISK?ResDisk?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"ResDisk","appName":"Inventory","engName":"RESDISK","classTitle":"ResDisk","fileName":"order_class_ResManUnit"},{"cnName":"文件系统","id":"order_class_ResManUnit?RESFILESYSTEM?ResFileSystem?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"ResFileSystem","appName":"Inventory","engName":"RESFILESYSTEM","classTitle":"ResFileSystem","fileName":"order_class_ResManUnit"},{"cnName":"文件","id":"order_class_ResManUnit?RESFILE?ResFile?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"ResFile","appName":"Inventory","engName":"RESFILE","classTitle":"ResFile","fileName":"order_class_ResManUnit"},{"cnName":"网络端口","id":"order_class_ResManUnit?RESINTERFACE?ResInterface?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"网络端口","appName":"Inventory","engName":"RESINTERFACE","classTitle":"ResInterface","fileName":"order_class_ResManUnit"},{"cnName":"SAN端口","id":"order_class_ResManUnit?RESSANINTERFACE?ResSANInterface?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"SAN端口","appName":"Inventory","engName":"RESSANINTERFACE","classTitle":"ResSANInterface","fileName":"order_class_ResManUnit"},{"cnName":"LUN","id":"order_class_ResManUnit?RESLUN?ResLUN?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"LUN","appName":"Inventory","engName":"RESLUN","classTitle":"ResLUN","fileName":"order_class_ResManUnit"},{"cnName":"服务","id":"order_class_ResManUnit?RESSERVICE?ResService?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"服务","appName":"Inventory","engName":"RESSERVICE","classTitle":"ResService","fileName":"order_class_ResManUnit"},{"cnName":"目标代码","id":"order_class_ResManUnit?RESOBJECTCODE?ResObjectCode?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"目标代码","appName":"Inventory","engName":"RESOBJECTCODE","classTitle":"ResObjectCode","fileName":"order_class_ResManUnit"},{"cnName":"系统帐号","id":"order_class_ResManUnit?RESACCOUNT?ResAccount?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"系统帐号","appName":"Inventory","engName":"RESACCOUNT","classTitle":"ResAccount","fileName":"order_class_ResManUnit"},{"cnName":"集群系统","id":"order_class_ResManUnit?RESTRUNKINGSYSTEM?ResTrunkingSystem?1.0","lastUpdateTime":"2009-12-07","version":"1.0","desc":"集群系统","appName":"Inventory","engName":"RESTRUNKINGSYSTEM","classTitle":"ResTrunkingSystem","fileName":"order_class_ResManUnit"},{"cnName":"路由器查询","id":"order_class_ResEntity?RESROUTER?ResRouter?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"路由器查询","appName":"Inventory","engName":"RESROUTER","classTitle":"ResRouter","fileName":"order_class_ResEntity"},{"cnName":"交换机查询","id":"order_class_ResEntity?RESSWITCH?ResSwitch?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"交换机查询","appName":"Inventory","engName":"RESSWITCH","classTitle":"ResSwitch","fileName":"order_class_ResEntity"},{"cnName":"磁盘阵列","id":"order_class_ResEntity?RESSTORAGE?ResStorage?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"磁盘阵列","appName":"Inventory","engName":"RESSTORAGE","classTitle":"ResStorage","fileName":"order_class_ResEntity"},{"cnName":"交换机查询","id":"order_class_ResEntity?ASSETRESSWITCH?ResSwitch?1.0","lastUpdateTime":"2013-04-23","version":"1.0","desc":"交换机查询","appName":"Inventory","engName":"ASSETRESSWITCH","classTitle":"ResSwitch","fileName":"order_class_ResEntity"},{"cnName":"IT设备查询","id":"order_class_ResEntity?JF_RESNODE?ResNode?1.0","lastUpdateTime":"2009-02-19","version":"1.0","desc":"IT设备查询","appName":"Inventory","engName":"JF_RESNODE","classTitle":"ResNode","fileName":"order_class_ResEntity"},{"cnName":"机柜","id":"order_class_ResEntity?JF_RESRACK?ResRack?1.0","lastUpdateTime":"2009-05-21","version":"1.0","desc":"机柜","appName":"Inventory","engName":"JF_RESRACK","classTitle":"ResRack","fileName":"order_class_ResEntity"},{"cnName":"软硬件资源","id":"order_class_ResEntity?RESENTITY?ResEntity?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"软硬件资源","appName":"Inventory","engName":"RESENTITY","classTitle":"ResEntity","fileName":"order_class_ResEntity"},{"cnName":"IT设备","id":"order_class_ResEntity?RESNODE?ResNode?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"IT设备","appName":"Inventory","engName":"RESNODE","classTitle":"ResNode","fileName":"order_class_ResEntity"},{"cnName":"刀片箱","id":"order_class_ResEntity?RESBOX?ResBox?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"刀片箱","appName":"Inventory","engName":"RESBOX","classTitle":"ResBox","fileName":"order_class_ResEntity"},{"cnName":"SAN交换机","id":"order_class_ResEntity?RESSANSWITCH?ResSANSwitch?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"SAN交换机","appName":"Inventory","engName":"RESSANSWITCH","classTitle":"ResSANSwitch","fileName":"order_class_ResEntity"},{"cnName":"服务器","id":"order_class_ResEntity?RESHOST?ResHost?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"服务器","appName":"Inventory","engName":"RESHOST","classTitle":"ResHost","fileName":"order_class_ResEntity"},{"cnName":"刀片服务器","id":"order_class_ResEntity?RESBLADE?ResBlade?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"刀片服务器","appName":"Inventory","engName":"RESBLADE","classTitle":"ResBlade","fileName":"order_class_ResEntity"},{"cnName":"机柜","id":"order_class_ResEntity?RESRACK?ResRack?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"机柜","appName":"Inventory","engName":"RESRACK","classTitle":"ResRack","fileName":"order_class_ResEntity"},{"cnName":"系统部件","id":"order_class_ResEntity?RESSYSPART?ResSysPart?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"系统部件","appName":"Inventory","engName":"RESSYSPART","classTitle":"ResSysPart","fileName":"order_class_ResEntity"},{"cnName":"进程","id":"order_class_ResEntity?RESPROCESS?ResProcess?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"进程","appName":"Inventory","engName":"RESPROCESS","classTitle":"ResProcess","fileName":"order_class_ResEntity"},{"cnName":"数据库部件","id":"order_class_ResEntity?RESDATABASEPART?ResDatabasePart?2.0","lastUpdateTime":"2014-12-02","version":"2.0","desc":"数据库部件","appName":"Inventory","engName":"RESDATABASEPART","classTitle":"ResDatabasePart","fileName":"order_class_ResEntity"},{"cnName":"虚拟机","id":"order_class_component?COMP_RESVM?ResVM?v1.0","lastUpdateTime":"2013-10-22","version":"v1.0","desc":"虚拟机","appName":"Inventory","engName":"COMP_RESVM","classTitle":"ResVM","fileName":"order_class_component"},{"cnName":"服务器","id":"order_class_component?COMP_RESHOST?ResHost?v1.0","lastUpdateTime":"2013-10-22","version":"v1.0","desc":"服务器","appName":"Inventory","engName":"COMP_RESHOST","classTitle":"ResHost","fileName":"order_class_component"}];
   
/**
 * Created by huipu on 2016/2/1.
 */
$(function () {
    //refreshData(20,1,10,json.length);
    var pageSize = 20;
    var pageNo = 1;
    builderUQTQueryMsg(getJsonArrayByPageSize(pageSize,pageNo));

    var totalPage = getTotllePage(pageSize);
    var totalRecords = json.length;
    //生成分页控件 根据分页的形式在这里设置
    kkpager.init({
        pno: pageNo,
        //总页码
        total: totalPage,
        //总数据条数
        totalRecords: totalRecords,
        //页面条数
        pageSize: pageSize
    });
    kkpager.generPageHtml();

});
/**
 * 获取总页数
 * @returns {number}
 */
var getTotllePage = function (pageSize) {
    var jsonCount = json.length;
    var shang = jsonCount/pageSize;
    var yushu = jsonCount%pageSize;
    if(yushu >0){
        shang ++;
    }
    return shang;
}
/**
 * 获取分页后的数据
 * @param pageSize
 * @param pageNo
 * @returns {*}
 */
var getJsonArrayByPageSize = function (pageSize,pageNo){
    var jsonCount = json.length;
    var shang = getTotllePage(pageSize);
    var startIndex = (pageNo-1)*pageSize;
    var endIndex = (shang == pageNo)? jsonCount:pageNo*pageSize;
    return json.slice(startIndex,endIndex);
}

/**
 * 刷新页面数据
 * @param pageSize   每页显示条数
 * @param pageNum    第几页
 */
function refreshData(pageSize, pageNo) {
    builderUQTQueryMsg(getJsonArrayByPageSize(pageSize,pageNo));

    var totalPage = getTotllePage(pageSize);
    var totalRecords = json.length;
    //生成分页控件 根据分页的形式在这里设置
    kkpager.init({
        pno: pageNo,
        //总页码
        total: totalPage,
        //总数据条数
        totalRecords: totalRecords,
        //页面条数
        pageSize: pageSize
    });
    kkpager.generPageHtml();

}


/**
 * 构建表格数据
 */
var builderUQTQueryMsg = function (UQTQueryMsg){
    var UQT_detailTable = $('#UQT_detailTable');
    UQT_detailTable.empty();
    var th = '<tr><th scope="col" class="chi_name" ><span class="fuxuan" ><input type="checkbox" onclick="optionCheckBoxes(this)" id="tottleSe"/></span>标题名称</th><th scope="col" class="eng_name" >英文名称</th><th scope="col" class="query_pro" >类标题</th><th class="match_type" scope="col">描述</th><th scope="col"  class="dis_order">应用名称</th><th scope="col"  class="dis_dta">操作</th><th class="dis_hidden" style="display: none">隐藏属性</th></tr>';

    UQT_detailTable.append(th);
    var tr  ;
    $.each(UQTQueryMsg, function(i,eachData){
        tr = $('<tr>');
        var englishName = eachData.engName;
        var chineseName = eachData.cnName;
        var propertyName = eachData.classTitle;
        var compareType = eachData.desc;
        var properType = eachData.version;
        var order = eachData.appName;
        tr.append('<td class="chi_name"><span class="fuxuan" ><input type="checkbox" id="tottleSe_"'+englishName+'/></span>'+chineseName+'</td><td class="eng_name">'+englishName+'</td><td class="query_pro">'+propertyName+'</td><td class="match_type">'+compareType+'</td><td class="dis_order">'+order+'</td><td class="dis_dta"><a class="editOp" href="javascript:void(0);" onclick="newOrUpdateQueryPro(this)">修改</a><a class="editOp" href="javascript:void(0);" onclick="deleteUQTConfig(this)">删除</a></td><td class="dis_hidden" style="display: none"><input type="hidden" value="'+properType+'"/></td>');
        UQT_detailTable.append(tr);
    });
}


/**
*选择左侧checkbox
*
*/
var optionCheckBoxes = function(data){
    var checkType = $(data).is(':checked');
    var trs = $(data).parent().parent().parent().nextAll();
    
    if(checkType){
        //全部选择
        trs.each(function (trNode) {
            var currentCheck = $(this).find('>td span input[type="checkbox"]');
            //alert(currentCheck.is(':checked'));
            currentCheck.attr("checked", true);
        });
    }else{
        //全部取消选择
        trs.each(function (trNode) {
            var currentCheck = $(this).find('>td span input[type="checkbox"]');
            //alert(currentCheck.is(':checked'));
            currentCheck.attr("checked", false);
        });
    }
}
/**
 * Created by huipu on 2016/1/28.
 *	分页插件
 */
var kkpager = {
    //divID
    pagerid: 'div_pager',
    //当前页码
    pno: 1,
    //总页码
    total: 1,
    //总数据条数
    totalRecords: 0,
    //是否显示总页数
    isShowTotalPage: true,
    //是否显示总记录数
    isShowTotalRecords: true,
    //是否显示页码跳转输入框
    isGoPage: true,
    //页面条数默认大小
    pagesize : 20,
    //链接前部
    hrefFormer: '',
    //链接尾部
    hrefLatter: '',
    /****链接算法****/
    getLink: function (n) {
        //这里的算法适用于比如：
        //hrefFormer=http://baidu.com/news/20131212
        //hrefLatter=.html
        //那么首页（第1页）就是http://baidu.com/news/20131212.html
        //第2页就是http://baidu.com/news/20131212_2.html
        //第n页就是http://baidu.com/news/20131212_n.html
        if (n == 1) {
            return this.hrefFormer + this.hrefLatter;
        } else {
            return this.hrefFormer + '_' + n + this.hrefLatter;
        }
    },
    //跳转框得到输入焦点时
    focus_gopage: function () {
        var btnGo = $('#btn_go');
        $('#btn_go_input').attr('hideFocus', true);
        btnGo.show();
        btnGo.css('left', '0px');
        $('#go_page_wrap').css('border-color', '#6694E3');
        btnGo.animate({ left: '+=44' }, 50, function () {
            //$('#go_page_wrap').css('width','88px');
        });
    },

    //跳转框失去输入焦点时

    blur_gopage: function () {
        setTimeout(function () {
            var btnGo = $('#btn_go');
            //$('#go_page_wrap').css('width','44px');
            btnGo.animate({
                left: '-=44'
            }, 100, function () {
                $('#btn_go').css('left', '0px');
                $('#btn_go').hide();
                $('#go_page_wrap').css('border-color', '#DFDFDF');
            });
        }, 400);
    },
    //根据页数刷新页面数据
    gopage: function (data) {
        var currentPage = '';
        if(data.tagName == 'A') {
            //点击的是a标签，这里写你的代码
            var tempPage = $(data).html();
            if(tempPage == '下一页'){
                currentPage = parseInt(this.pno)+1;
            }else if(tempPage == '上一页'){
                currentPage = parseInt(this.pno)-1;
            }else{
                currentPage = tempPage;
            }
        }else{
            //手动输入要跳转的页数
            var str_page = $("#btn_go_input").val();
            if (isNaN(str_page)) {
                $("#btn_go_input").val(this.next);
                return;
            }
            var n = parseInt(str_page);
            if (n < 1 || n > this.total) {
                $("#btn_go_input").val(this.next);
                return;
            }
            currentPage = n;
        }
        refreshData(this.pagesize,currentPage);
        //不管是点击页码还是手动输入页码，都要将下一页的页码选中
        //此时，只需要重新加载本组件即可
    },
    changepageSize:function(data){
        //更改每页显示条数
        //刷新数据时初始化页数为1，
        var pageSize = $(data).val();
        //alert('要初始化的页面条数为:'+pageSize);
        refreshData(pageSize,1);
    },
    //分页按钮控件初始化
    init: function (config) {

        //页面条数初始化
        this.pagesize = config.pageSize;
        //赋值
        this.pno = isNaN(config.pno) ? 1 : parseInt(config.pno);
        this.total = isNaN(config.total) ? 1 : parseInt(config.total);
        this.totalRecords = isNaN(config.totalRecords) ? 0 : parseInt(config.totalRecords);
        if (config.pagerid) { this.pagerid = pagerid; }
        if (config.isShowTotalPage != undefined) { this.isShowTotalPage = config.isShowTotalPage; }
        if (config.isShowTotalRecords != undefined) { this.isShowTotalRecords = config.isShowTotalRecords; }
        if (config.isGoPage != undefined) { this.isGoPage = config.isGoPage; }
        this.hrefFormer = config.hrefFormer || '';
        this.hrefLatter = config.hrefLatter || '';
        if (config.getLink && typeof (config.getLink) == 'function') { this.getLink = config.getLink; }
        //验证
        if (this.pno < 1) this.pno = 1;
        this.total = (this.total <= 1) ? 1 : this.total;
        if (this.pno > this.total) this.pno = this.total;
        this.prv = (this.pno <= 2) ? 1 : (this.pno - 1);
        this.next = (this.pno >= this.total - 1) ? this.total : (this.pno + 1);
        this.hasPrv = (this.pno > 1);
        this.hasNext = (this.pno < this.total);

        this.inited = true;
    },
    //生成分页控件Html
    generPageHtml: function () {
        if (!this.inited) {
            return;
        }

        var str_prv = '', str_next = '';
        if (this.hasPrv) {
            str_prv = '<a href="javascript:void(0);"  onclick="kkpager.gopage(this);" title="上一页">上一页</a>';
            //str_prv = '<a href="javascript:void(0);""javascript:void(0);""' + this.getLink(this.prv) + '" title="上一页">上一页</a>';
        } else {
            str_prv = '<span class="disabled">上一页</span>';
        }

        if (this.hasNext) {
            str_next = '<a href="javascript:void(0);" onclick="kkpager.gopage(this);"  title="下一页">下一页</a>';
            //str_next = '<a href="javascript:void(0);""javascript:void(0);""' + this.getLink(this.next) + '" title="下一页">下一页</a>';
        } else {
            str_next = '<span class="disabled">下一页</span>';
        }


        var str = '';
        var dot = '<span>...</span>';
        var total_info = '';
        if (this.isShowTotalPage || this.isShowTotalRecords) {
            total_info = '<span class="normalsize">共';
            if (this.isShowTotalPage) {
                total_info += this.total + '页';
                if (this.isShowTotalRecords) {
                    total_info += '&nbsp;/&nbsp;';
                }
            }
            if (this.isShowTotalRecords) {
                total_info += this.totalRecords + '条数据';
            }

            total_info += '</span>';
        }

        var pageSize = '<select id="select_pagesize" onchange="kkpager.changepageSize(this)">';

        if(this.pagesize == 10)
            pageSize += '<option selected="selected" value="10" >10</option>';
        else
            pageSize += '<option  value="10" >10</option>';
        if(this.pagesize == 20)
             pageSize += '<option selected="selected" value="20" >20</option>';
        else
            pageSize += '<option  value="20" >20</option>';
        if(this.pagesize == 25)
            pageSize += '<option selected="selected" value="25" >25</option>';
        else
            pageSize += '<option  value="25" >25</option>';
        if(this.pagesize == 50)
            pageSize += '<option selected="selected" value="50" >50</option>';
        else
            pageSize += '<option  value="50" >50</option>';
        if(this.pagesize == 75)
            pageSize += '<option selected="selected" value="75" >75</option>';
        else
            pageSize += '<option  value="75" >75</option>';
        if(this.pagesize == 100)
            pageSize += '<option selected="selected" value="100" >100</option>';
        else
            pageSize += '<option  value="100" >100</option>';
        pageSize +='</select><span class="normalsize" >条/页</span>';

        var gopage_info = '';
        if (this.isGoPage) {
            gopage_info = '&nbsp;<span class="normalsize" >转到</span><span id="go_page_wrap" style="display:inline-block;width:44px;height:18px;border:1px solid #DFDFDF;margin:0px 1px;padding:0px;position:relative;left:0px;top:5px;">' +
                '<input type="button" id="btn_go" onclick="kkpager.gopage(this);" style="width:44px;height:20px;line-height:20px;padding:0px;font-family:arial,宋体,sans-serif;text-align:center;border:0px;background-color:#0063DC;color:#FFF;position:absolute;left:0px;top:-1px;display:none;" value="确定" />' +
                '<input type="text" id="btn_go_input" onfocus="kkpager.focus_gopage()" onkeypress="if(event.keyCode<48 || event.keyCode>57)return false;" onblur="kkpager.blur_gopage()" style="width:42px;height:16px;text-align:center;border:0px;position:absolute;left:0px;top:0px;outline:none;" value="' + this.pno + '" /></span><span class="normalsize" >页</span>';
        }

        //分页处理
        if (this.total <= 8) {
            for (var i = 1; i <= this.total; i++) {
                if (this.pno == i) {
                    str += '<span class="curr">' + i + '</span>';
                } else {
                    str += '<a href="javascript:void(0);" onclick="kkpager.gopage(this);" title="第' + i + '页">' + i + '</a>';
                }
            }
        } else {
            if (this.pno <= 5) {
                for (var i = 1; i <= 7; i++) {
                    if (this.pno == i) {
                        str += '<span class="curr">' + i + '</span>';
                    } else {
                        str += '<a href="javascript:void(0);" onclick="kkpager.gopage(this);" title="第' + i + '页">' + i + '</a>';
                    }
                }
                str += dot;
            } else {
                str += '<a href="javascript:void(0);" onclick="kkpager.gopage(this);" title="第1页">1</a>';
                str += '<a href="javascript:void(0);" onclick="kkpager.gopage(this);" title="第2页">2</a>';
                str += dot;

                var begin = this.pno - 2;
                var end = this.pno + 2;
                if (end > this.total) {
                    end = this.total;
                    begin = end - 4;
                    if (this.pno - begin < 2) {
                        begin = begin - 1;
                    }
                } else if (end + 1 == this.total) {
                    end = this.total;
                }
                for (var i = begin; i <= end; i++) {
                    if (this.pno == i) {
                        str += '<span class="curr">' + i + '</span>';
                    } else {
                        str += '<a href="javascript:void(0);" onclick="kkpager.gopage(this);" title="第' + i + '页">' + i + '</a>';
                    }
                }
                if (end != this.total) {
                    str += dot;
                }
            }
        }

        str = "&nbsp;" + pageSize+"&nbsp;"+str_prv + str + str_next + total_info +  gopage_info;
        $("#" + this.pagerid).html(str);
    }
};

function getParameter(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]); return null;
};
